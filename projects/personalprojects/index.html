<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" width="device-width, initial-scale=1.0">
		<meta name="description" content="Anas Iqbal is a Software Engineer, Gameplay Developer living and working in Pakistan.">
		<meta name="author" content="Anas Iqbal">

		<title>Anas Iqbal | Software Engineer, Gameplay Developer.</title>		

		<link href="/css/bootstrap.min.css" rel="stylesheet">
		<link href="/css/style.css" rel="stylesheet">
	</head>
	<body>
		<div class="container">
			<!-- header -->
			<div class="header">
				<ul class="nav nav-pills pull-right">
					<li><a href="/cv" title="CV">CV</a></li>
					
                    <li role="presentation" class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Projects <span class="caret"></span>
                        </a>
						<ul class="dropdown-menu">
							<li><a href="/projects/personalprojects" title="Personal Projects">Personal Projects</a></li>
							<li><a href="/projects/professionalprojects" title="Professional Projects">Professional Projects</a></li>
						</ul>
					</li>
					
                    <li><a href="/posts" title="Posts">Posts</a></li>
					<li><a href="/contact" title="Contact">Contact</a></li>
				</ul>
				<h3 class="text-muted"><a href="/">Anas Iqbal</a></h3>
			</div>
			<!-- /header -->

			<!-- Content -->
			<div id="Projects">
				
			</div>
			<!-- /Content -->
			
			<!-- footer -->
			<div class="footer">
				<div class="row">
					<div class="col-sm-8">
						<p><small>&copy; anasiqbal 2016</small></p>
					</div>
					<div class="col-sm-4">
						<p class="pull-right"><small><a href="/about" title="About this site">About this site</a></small></p>
					</div>
				</div>
			</div>
			<!-- /footer -->
            
		</div> <!-- /container -->
        
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
		<script>
			window.onload = function()
			{
				LoadXMLDoc("/files/Projects_Personal.xml")
			};
			
			function LoadXMLDoc(path) {
				var xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						BuildPage(this);
					}
				};
				xmlhttp.open("GET", path, true);
				xmlhttp.send();
			}
			
			function BuildPage(xml)
			{
				var i;
				var xmlDoc = xml.responseXML;
				var html = "";
				
				var xmlItem = xmlDoc.getElementsByTagName("Project");
				for (i = 0; i <xmlItem.length; i++) {
					var indicators = "";
					var items = "";
					var images = xmlItem[i].getElementsByTagName("Image");
					if(images) {
						for(img = 0; img < images.length; img++) {
							if(img == 0) {
								indicators = "<li data-target=\"#projectCarousel" + i + "\" data-slide-to=" + img + " class=\"active\"></li>";
								items = "<div class=\"item active\"><img class=\"fixed-height\" src=\"" + images[img].getAttribute("path") + "\" alt=\"" + images[img].getAttribute("name") + "\"></div>";
							}
							else {
								indicators += "<li data-target=\"#projectCarousel" + i + "\" data-slide-to=" + img + "></li>";
								items += "<div class=\"item\"><img class=\"fixed-height\" src=\"" + images[img].getAttribute("path") + "\" alt=\"" + images[img].getAttribute("name") + "\"></div>";
							}
						}
					}
					
					var name = xmlItem[i].getAttribute("name");
					var appStoreLink = xmlItem[i].getAttribute("appstore");
					var playStoreLink = xmlItem[i].getAttribute("playstore");
					var tags = xmlItem[i].getElementsByTagName("Tags")[0].childNodes[0].nodeValue;
					var disclaimer = xmlItem[i].getElementsByTagName("Disclaimer");
					if(disclaimer.length > 0) {
						disclaimer = disclaimer[0].childNodes[0].nodeValue;
					}
					var description = GetDescription(xmlItem[i].getElementsByTagName("Description")[0].childNodes);
					
					var project = "<br><div class=\"row\"><div class=\"col-xs-4 col-sm-4 col-md-4 col-lg-4\"><div id=\"projectCarousel" + i + "\" class=\"carousel slide\"><ol class=\"carousel-indicators\">" + indicators + "</ol><div class=\"carousel-inner\">" + items + "</div><a class=\"left carousel-control\" href=\"#projectCarousel" + i + "\" role=\"button\" data-slide=\"prev\"><span class=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"></span><span class=\"sr-only\">Previous</span></a><a class=\"right carousel-control\" href=\"#projectCarousel" + i + "\" role=\"button\" data-slide=\"next\"><span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\"></span><span class=\"sr-only\">Next</span></a></div></div><div class=\"col-xs-8 col-sm-8 col-md-8 col-lg-8\">";
					
					project += "<h4>" + name + "<br><small><blockquote>" + tags + "</blockquote></small></h4>";
					
					if(appStoreLink) {
						project += "<a href=\"" + appStoreLink + "\"><img src=\"/img/app_store_badge.svg\"></a>";
					}
					if(playStoreLink) {
						project += "<a href=\"" + playStoreLink + "\"><img width=\"155px\" src=\"/img/google-play-badge.png\"></a>";
					}
					if(disclaimer.length > 0) {
						project += "<blockquote>" + disclaimer + "</blockquote>";
					}
					project += description;
					
					project += "</div></div><br>";
					
					if(i != xmlItem.length - 1) {
						project += "<hr>";
					}
					
					html += project;
				}
				
				document.getElementById("Projects").innerHTML = html;
			}
			
			function GetDescription(descriptionNodes) {
				var description = "";
				for(i = 0; i < descriptionNodes.length; i++) {
					if(descriptionNodes[i].tagName == "ul") {
						description += "<ul>";
						description += GetDescription(descriptionNodes[i].childNodes);
						description += "</ul>";
					}
					else if(descriptionNodes[i].tagName == "p" || descriptionNodes[i].tagName == "li") {
						
						description += "<" + descriptionNodes[i].tagName + ">";
						description += descriptionNodes[i].childNodes[0].nodeValue;
						description += "</" + descriptionNodes[i].tagName + ">";
					}
				}
				
				return description;
			}
		</script>
    </body>
</html>